<!DOCTYPE HTML>
<html lang='en'>
    <body>
        <script>
            document.body.style.backgroundColor = 'white';
            var srcs = ['data:image/jpeg;base64,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',function(){_canvas.fillStyle='black';_canvas.fillRect(100,100,100,100);_canvas.fillStyle='red';_canvas.fillRect(200,200,100,100);},function(){var n = 0;while(n<400){_canvas.fillStyle='hsl('+(n/400*360)+',100%,50%)';_canvas.fillRect(n,0,1,400);n++;}},function(){var n = 0;_canvas.lineWidth=1;while(n<400){_canvas.strokeStyle='hsl('+(n/400*360)+',100%,50%)';_canvas.beginPath();_canvas.arc(200,200,n/2,0,2*Math.PI);_canvas.stroke();n++;}}];
            var names = ['Apple','Squares','Rainbow','Radial Rainbow'];
            var swirlSpeed = 5;
            var imageSmoothing = false;
            var swirlRadius = 100;
            var md = false;
            var mx = 0;
            var my = 0;
            var canvas = document.createElement('canvas');
            var _canvas = canvas.getContext('2d');
            canvas.width = 400;
            canvas.height = 400;
            _canvas.fillStyle = 'white';
            _canvas.fillRect(0,0,400,400);
            _canvas.fillStyle = 'black';
            _canvas.font = '50px Arial';
            _canvas.fillText('Image Swirler',50,100);
            _canvas.font = '30px Arial';
            _canvas.fillText('Hold the mouse to',50,150);
            _canvas.fillText('swirl the image.',50,200);
            _canvas.fillRect(40,260,160,60);
            _canvas.fillStyle = 'white';
            _canvas.fillText('Hold Here',50,300);
            document.body.appendChild(canvas);
            var range = document.createElement('input');
            range.type = 'range';
            range.value = 100;
            range.min = 10;
            range.max = 200;
            document.body.appendChild(document.createElement('br'));
            var font = document.createElement('font');
            font.innerHTML = 'Swirl Radius: ';
            document.body.appendChild(font);
            var swirlRadFont = document.createElement('font');
            swirlRadFont.innerHTML = 100;
            range.addEventListener('change',function(){
                swirlRadius = this.value;
                swirlRadFont.innerHTML = this.value;
            });
            document.body.appendChild(range);
            document.body.appendChild(swirlRadFont);
            var select = document.createElement('select');
            var o1 = document.createElement('option');
            var o2 = document.createElement('option');
            o1.innerHTML = 'Image Smoothing';
            o2.innerHTML = 'No Image Smoothing';
            select.appendChild(o2);
            select.appendChild(o1);
            select.addEventListener('change',function() {
                if(select.value=='Image Smoothing') {
                    imageSmoothing = true;
                } else {
                    imageSmoothing = false;
                }
            });
            document.body.appendChild(document.createElement('br'));
            document.body.appendChild(select);
            range2 = document.createElement('input');
            range2.type = 'range';
            range2.min = -20;
            range2.max = 20;
            range2.value = 5;
            font = document.createElement('font');
            font.innerHTML = 'Swirl Speed: ';
            document.body.appendChild(document.createElement('br'));
            document.body.appendChild(font);
            document.body.appendChild(range2);
            var speedFont = document.createElement('font');
            speedFont.innerHTML = 5;
            document.body.appendChild(speedFont);
            range2.addEventListener('change',function() {
                swirlSpeed = range2.value;
                speedFont.innerHTML = range2.value;
            });
            document.body.appendChild(document.createElement('br'));
            document.body.appendChild(document.createElement('br'));
            var font2 = document.createElement('font');
            font2.innerHTML = 'Set Image To:';
            document.body.appendChild(font2);
            document.body.appendChild(document.createElement('br'));
            var n = 0;
            while(n < names.length) {
                var button = document.createElement('button');
                button.innerHTML = names[n];
                button.dataId = n;
                button.addEventListener('click',function(event) {
                    _canvas.fillStyle = 'white';
                    _canvas.fillRect(0,0,400,400);
                    if(typeof srcs[this.dataId]=='string') {
                        var img = document.createElement('img');
                        img.src = srcs[this.dataId];
                        img.addEventListener('load',function() {
                            _canvas.drawImage(img,0,0,400,400);
                            img.remove;
                        });
                    } else {
                        srcs[this.dataId]();
                    }
                });
                document.body.appendChild(button);
                n++;
            }
            document.body.appendChild(document.createElement('br'));
            document.body.appendChild(document.createElement('br'));
            var font3 = document.createElement('font');
            font3.innerHTML = 'Upload Image:';
            document.body.appendChild(font3);
            document.body.appendChild(document.createElement('br'));
            var upload = document.createElement('input');
            upload.type = 'file';
            upload.accept = 'image/png,image/jpeg';
            upload.multiple = false;
            var uploadButton = document.createElement('button');
            uploadButton.innerHTML = 'Load Selected File';
            uploadButton.addEventListener('click',function(){
                if(upload.files[0]!=undefined&&upload.files[0].type=='image/png'||upload.files[0].type=='image/jpeg') {
                    var fr = new FileReader();
                    fr.readAsDataURL(upload.files[0]);
                    fr.addEventListener('load',function() {
                        var img = document.createElement('img');
                        img.src = fr.result;
                        img.addEventListener('load',function(event) {
                            _canvas.imageSmoothingEnabled = false;
                            _canvas.drawImage(img,0,0,400,400);
                            img.remove;
                        });
                    });
                }
            });
            document.body.appendChild(upload);
            document.body.appendChild(uploadButton);
            canvas.style.border = '1px solid black';
            canvas.addEventListener('mousedown',function(event){
                md = true;
            });
            canvas.addEventListener('mouseup',function(event){
                md = false;
            });
            canvas.addEventListener('mousemove',function(event){
                mx = event.pageX;
                my = event.pageY;
            });
            function update() {
                if(md) {
                    var i = document.createElement('img');
                    i.src = canvas.toDataURL('image/png');
                    _canvas.save();
                    _canvas.translate(mx,my);
                    _canvas.rotate(swirlSpeed*Math.PI/180);
                    _canvas.beginPath();
                    _canvas.arc(0,0,swirlRadius,0,2*Math.PI);
                    _canvas.clip();
                    _canvas.imageSmoothingEnabled = imageSmoothing;
                    _canvas.drawImage(i,-mx,-my);
                    _canvas.restore();
                }
            }
            function rotate(cx, cy, x, y, angle) {
                var radians = (Math.PI / 180) * angle,
                    cos = Math.cos(radians),
                    sin = Math.sin(radians),
                    nx = (cos * (x - cx)) + (sin * (y - cy)) + cx,
                    ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;
                return [nx, ny];
            }
            function distance(x1,y1,x2,y2) {
                return Math.sqrt(Math.pow(x1-x2,2)+Math.pow(y1-y2,2));
            }
            window.setInterval(update,10);
        </script>
    </body>
</html>